<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="/css/visitPad.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js" integrity="sha512-lOrm9FgT1LKOJRUXF3tp6QaMorJftUjowOWiDcG5GFZ/q7ukof19V0HKx/GWzXCdt9zYju3/KhBNdCLzK8b90Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css" integrity="sha512-0p3K0H3S6Q4bEWZ/WmC94Tgit2ular2/n0ESdfEX8l172YyQj8re1Wu9s/HT9T/T2osUw5Gx/6pAZNk3UKbESw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="main-container">
        <header style="text-align: center; font-size: xx-large;font-weight: bold;">
            Om Fracture and Trauma Hospital
        </header>
        
        <div class="patient-info">
            <label hidden for="" id="patientId"><%=patient._id%></label>
            <div class="patient-data">
                <small for=""><b>ID</b></small>
                <label for="" id=""><%=patient.PatientId%></label>
            </div>
            <div class="patient-data">
                <small for=""><b>Name</b></small>
                <label for=""><%=patient.Name%></label>
            </div>
            <div class="patient-data">
                <small for=""><b>Gender</b></small>
                <label for=""><%=patient.Gender%></label>
            </div>
            <div class="patient-data">
                <small for=""><b>Age</b></small>
                <label for=""><%=patient.Age%></label>
            </div>
            <div class="patient-address">
                <small for=""><b>Address</b></small>
                <label for=""><%=patient.Address%></label>
            </div>
            <div class="patient-address">
                <label for=""><a class="btn btn-primary" target="_blank" href="/patients/history/<%=patient._id%>">Check History</a></label>
            </div>
        </div>
        <div class="body-container">
            <div class="panel left-panel">
                <div class="examinations-actions" style="text-align: center;">
                    <label style="margin-left: 5%;font-size: large;font-weight: bold;">Complaint</label>
                </div>
                <div style="height: 80%;overflow-y: auto;" id="prescriptionsList">
                    <div style="margin-left: 7%;margin-top: 2%;">
                        <textarea name="" id="complaintBox" cols="35" rows="10" placeholder="Enter Complaint here ..."></textarea>
                    </div>
                </div>
                <div style="display: flex;justify-content: center; margin-top: 2%; height: 8%;">
                    <button class="btn btn-primary" style="margin-bottom: 2%; height: 100%;" onclick="saveComplaint()">Save</button>
                </div>
            </div>
            <div class="panel mid-panel">
                <div class="examinations-actions" style="display: flex; justify-content: space-between; padding-left: 3%;padding-right: 3%; padding-top: 1%;">
                    <label style="margin-left: 32%;font-size: large;font-weight: bold; width: 40%;">On Examinations</label>
                    <button class="btn btn-success" style="width: 20%; height: 100%;" onclick="openExamminationsBox()">Add more</button>
                </div>
                <form action="/test" method="post" ></form>
                    <div style="height: 75%;overflow-y: auto; margin-top: 2%;" id="examintionsList" >
                        
                            <%for(let i=0;i<OE.length;i++){%>
                                <div class="form-floating mb-2 test-data">
                                    <input type="text" id="<%=OE[i]%>" class="form-control" id="floatingInput" placeholder="name@example.com" >
                                    <label for="<%=OE[i]%>"><%=OE[i]%></label>
                                </div>
                            <%}%>
                    </div>
                    
                    <div style="display: flex;justify-content: center; margin-top: 2%;">
                        <input class="btn btn-primary" onclick="saveExaminations()" value="Save">
                    </div>
                </form>
                <div id="examinationsBox" style="border: 1px solid gray; width: 22%; height: 240px; position: absolute; top: 33%; left: 37%;background-color: #ecf7ed; border-radius: 1.5rem; z-index: 2;">
                    <div>
                        <label style="display: block;font-size: x-large;text-align: center; font-weight: bold; margin-bottom: 3%;color: #347ab9;" for="">Add New Test</label>
                        <input id="newExamination" style="margin-left: 2.8%; width: 92.5%;margin-bottom: 1%;" type="text" placeholder="Test Name">
                        <textarea style="margin-left: 3%;" name="" id="newExaminationsValue" cols="33" rows="3" placeholder="Test Result"></textarea>
                        <div style="display: flex;justify-content: center;margin-top: 1%;">
                            <button class="btn btn-warning" style="margin-right: 2%;" onclick="closeExamminationsBox()">Cancel</button>
                            <button class="btn btn-success" style="margin-left: 2%;" onclick="addNewExaminations(false,'','')">Add</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel right-panel">
                <div class="examinations-actions" style="text-align: center; margin-bottom: 2%;">
                    <label style="margin-left: 25%;font-size: x-large;font-weight: bold;">Tests</label>
                    <button class="btn btn-success" style="position: relative;left: 13%;top: 0%; width: 25%; height: 90%;" onclick="opentestsBox()">Add more</button>
                </div>
                <div style="height: 78%;overflow-y: auto;" id="testsList">
                    
                </div>
                <div id="testsBox" style="border: 1px solid gray; width: 20%; height: 260px; position: absolute; top: 33%; left: 73.5%;background-color: #ecf7ed; border-radius: 1.5rem;">
                    <div>
                        <label style="display: block;font-size: x-large;text-align: center; font-weight: bold; margin-bottom: 3%;color: #347ab9;" for="">Add New Test</label>
                        <input id="newTest" style="margin-left: 2.8%; width: 92.5%;margin-bottom: 1%;" type="text" placeholder="Test Name">
                        <textarea style="margin-left: 3%;" name="" id="newTestValue" cols="30" rows="3" placeholder="Test Result"></textarea>
                        <div style="display: flex;justify-content: center;margin-top: 1%;">
                            <button class="btn btn-warning" style="margin-right: 2%;" onclick="closetestsBox()">Cancel</button>
                            <button class="btn btn-success" style="margin-left: 2%;" onclick="addNewtests(false,'','')">Add</button>
                        </div>
                    </div>
                </div>
                <div style="display: flex;justify-content: center; margin-top: 2%;">
                    <button class="btn btn-primary" onclick="saveTests()">Save</button>
                </div>
            </div>
        </div>
        <div style="display: flex;justify-content: center; margin-top: 0%;margin-bottom: 1%; height: 6%;">
            <button onclick="saveAll('<%=patient._id%>')" href="/patients/getPrescriptionForm/<%=patient._id%>" style="color: white; font-weight: bolder;" class="btn btn-warning">Move to Prescription Form</button>
        </div>
    </div>
    <script src="/js/visitPad.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>